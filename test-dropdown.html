<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸‹æ‹‰æ¡†æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 50px;
            background: #f5f5f5;
        }
        
        .test-container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            max-width: 400px;
            margin: 0 auto;
        }
        
        .mode-selector {
            display: flex;
            align-items: center;
            margin: 20px 0;
            position: relative;
        }
        
        .mode-title {
            font-size: 14px;
            color: #666;
            margin-right: 12px;
            font-weight: 500;
        }
        
        .mode-dropdown {
            position: relative;
            display: inline-block;
        }

        .mode-dropdown-btn {
            display: flex;
            align-items: center;
            background: rgba(0,0,0,0.04);
            border: 1px solid rgba(0,0,0,0.03);
            border-radius: 18px;
            padding: 8px 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            color: #374151;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            min-width: 120px;
        }

        .mode-dropdown-btn:hover {
            background: rgba(0,0,0,0.06);
            box-shadow: 0 2px 5px rgba(0,0,0,0.08);
        }

        .selected-mode-icon {
            margin-right: 8px;
            font-size: 16px;
        }

        .dropdown-arrow {
            margin-left: auto;
            font-size: 12px;
            transition: transform 0.3s ease;
        }

        .mode-dropdown-btn.active .dropdown-arrow {
            transform: rotate(180deg);
        }

        .mode-dropdown-content {
            position: absolute;
            top: 100%;
            left: 0;
            background: white;
            min-width: 180px;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            border: 1px solid rgba(0,0,0,0.05);
            z-index: 1000;
            padding: 8px 0;
            display: none;
            animation: fadeIn 0.2s ease;
            margin-top: 4px;
        }

        .mode-dropdown-content.show {
            display: block;
        }

        .mode-option {
            padding: 12px 16px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            font-size: 14px;
            color: #333;
        }

        .mode-option:hover {
            background: rgba(0,0,0,0.04);
        }

        .mode-option.active {
            background: linear-gradient(135deg, #6e8efb, #a777e3);
            color: white;
        }

        .mode-option .mode-icon {
            margin-right: 10px;
            font-size: 16px;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .debug-info {
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            font-family: monospace;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h2>æ¨¡å¼é€‰æ‹©ä¸‹æ‹‰æ¡†æµ‹è¯•</h2>
        
        <div class="mode-selector">
            <span class="mode-title">é€‰æ‹©æ¨¡å¼ï¼š</span>
            <div class="mode-dropdown">
                <button class="mode-dropdown-btn" id="modeDropdownBtn">
                    <span class="selected-mode-icon">ğŸŒŸ</span>
                    <span class="selected-mode-name">é€šç”¨</span>
                    <span class="dropdown-arrow">â–¼</span>
                </button>
                <div class="mode-dropdown-content" id="modeDropdownContent">
                    <div class="mode-option active" data-mode="general">
                        <span class="mode-icon">ğŸŒŸ</span>
                        <span class="mode-name">é€šç”¨</span>
                    </div>
                    <div class="mode-option" data-mode="business">
                        <span class="mode-icon">ğŸ’¼</span>
                        <span class="mode-name">å•†ä¸š</span>
                    </div>
                    <div class="mode-option" data-mode="drawing">
                        <span class="mode-icon">ğŸ¨</span>
                        <span class="mode-name">ç»˜ç”»</span>
                    </div>
                    <div class="mode-option" data-mode="academic">
                        <span class="mode-icon">ğŸ“š</span>
                        <span class="mode-name">å­¦æœ¯</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="debug-info" id="debugInfo">
            <strong>è°ƒè¯•ä¿¡æ¯ï¼š</strong><br>
            å½“å‰æ¨¡å¼: <span id="currentMode">general</span><br>
            ç‚¹å‡»æ¬¡æ•°: <span id="clickCount">0</span><br>
            ä¸‹æ‹‰æ¡†çŠ¶æ€: <span id="dropdownStatus">éšè—</span>
        </div>
    </div>

    <script>
        let currentMode = 'general';
        let clickCount = 0;
        
        // è·å–å…ƒç´ 
        const modeDropdownBtn = document.getElementById('modeDropdownBtn');
        const modeDropdownContent = document.getElementById('modeDropdownContent');
        const modeOptions = document.querySelectorAll('.mode-option');
        const selectedModeIcon = document.querySelector('.selected-mode-icon');
        const selectedModeName = document.querySelector('.selected-mode-name');
        
        // è°ƒè¯•ä¿¡æ¯å…ƒç´ 
        const debugInfo = document.getElementById('debugInfo');
        const currentModeSpan = document.getElementById('currentMode');
        const clickCountSpan = document.getElementById('clickCount');
        const dropdownStatusSpan = document.getElementById('dropdownStatus');
        
        function updateDebugInfo() {
            currentModeSpan.textContent = currentMode;
            clickCountSpan.textContent = clickCount;
            dropdownStatusSpan.textContent = modeDropdownContent.classList.contains('show') ? 'æ˜¾ç¤º' : 'éšè—';
        }
        
        console.log('æµ‹è¯•é¡µé¢åŠ è½½å®Œæˆ');
        console.log('å…ƒç´ æ£€æŸ¥:', {
            modeDropdownBtn: modeDropdownBtn ? 'å­˜åœ¨' : 'ä¸å­˜åœ¨',
            modeDropdownContent: modeDropdownContent ? 'å­˜åœ¨' : 'ä¸å­˜åœ¨',
            modeOptions: modeOptions.length + 'ä¸ªé€‰é¡¹'
        });
        
        // ç‚¹å‡»ä¸‹æ‹‰æŒ‰é’®
        if (modeDropdownBtn && modeDropdownContent) {
            modeDropdownBtn.addEventListener('click', function(e) {
                clickCount++;
                console.log('ç‚¹å‡»ä¸‹æ‹‰æŒ‰é’®ï¼Œç¬¬' + clickCount + 'æ¬¡');
                e.stopPropagation();
                this.classList.toggle('active');
                modeDropdownContent.classList.toggle('show');
                updateDebugInfo();
            });
        }
        
        // ç‚¹å‡»é€‰é¡¹
        modeOptions.forEach(option => {
            option.addEventListener('click', function() {
                const mode = this.getAttribute('data-mode');
                const icon = this.querySelector('.mode-icon').textContent;
                const name = this.querySelector('.mode-name').textContent;
                
                console.log('é€‰æ‹©æ¨¡å¼:', mode);
                
                // æ›´æ–°é€‰ä¸­çŠ¶æ€
                modeOptions.forEach(opt => opt.classList.remove('active'));
                this.classList.add('active');
                
                // æ›´æ–°æ˜¾ç¤º
                selectedModeIcon.textContent = icon;
                selectedModeName.textContent = name;
                currentMode = mode;
                
                // éšè—ä¸‹æ‹‰èœå•
                modeDropdownContent.classList.remove('show');
                modeDropdownBtn.classList.remove('active');
                
                updateDebugInfo();
            });
        });
        
        // ç‚¹å‡»é¡µé¢å…¶ä»–åŒºåŸŸå…³é—­
        document.addEventListener('click', function(e) {
            if (modeDropdownContent && modeDropdownContent.classList.contains('show')) {
                console.log('ç‚¹å‡»é¡µé¢å…¶ä»–åŒºåŸŸï¼Œå…³é—­ä¸‹æ‹‰èœå•');
                modeDropdownContent.classList.remove('show');
                modeDropdownBtn.classList.remove('active');
                updateDebugInfo();
            }
        });
        
        // é˜²æ­¢ç‚¹å‡»ä¸‹æ‹‰å†…å®¹æ—¶å…³é—­
        if (modeDropdownContent) {
            modeDropdownContent.addEventListener('click', function(e) {
                console.log('ç‚¹å‡»ä¸‹æ‹‰å†…å®¹ï¼Œé˜»æ­¢å†’æ³¡');
                e.stopPropagation();
            });
        }
        
        // åˆå§‹åŒ–è°ƒè¯•ä¿¡æ¯
        updateDebugInfo();
    </script>
</body>
</html>
